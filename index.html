<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zurich Takaful Info App</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg, #0d47a1, #1976d2);
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    h1 { margin-top: 20px; }
    select, button, input, textarea {
      padding: 10px 15px;
      margin: 8px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
    }
    select { background: white; color: #0d47a1; }
    #solatResult, #cuacaResult {
      margin: 15px auto;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 10px;
      width: 90%;
    }
    .produk-section { margin-top: 30px; padding: 10px; }
    .produk-btn {
      display: block;
      background: white;
      color: #0d47a1;
      border-radius: 10px;
      margin: 10px auto;
      padding: 12px;
      width: 90%;
      font-weight: bold;
      transition: 0.2s;
    }
    .produk-btn:hover { background: #bbdefb; transform: scale(1.03); }

    /* Modal */
    .modal {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.7);
      display: flex; align-items: center; justify-content: center;
      visibility: hidden; opacity: 0; transition: 0.3s;
      z-index: 1000;
    }
    .modal.show { visibility: visible; opacity: 1; }
    .modal-content {
      background: white; color: #0d47a1;
      border-radius: 15px; padding: 20px;
      width: 90%; max-width: 420px; text-align: left;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .close { float: right; font-weight: bold; cursor: pointer; color: #1976d2; }
    .close:hover { color: red; }
    #quoteForm { margin-top: 15px; display: flex; flex-direction: column; }
    #quoteForm input, #quoteForm textarea {
      margin: 6px 0; border: 1px solid #ccc;
      border-radius: 6px; padding: 8px; font-size: 15px; width: 100%;
    }
    #quoteForm button {
      background: #1976d2; color: white; font-weight: bold;
    }
    #quoteForm button:hover { background: #0d47a1; }
    footer { margin-top: 30px; font-size: 14px; opacity: 0.7; }

    /* Kuiz */
    #quizSection { margin: 30px auto; background: rgba(255,255,255,0.15);
      border-radius: 12px; width: 90%; padding: 15px; }
    .btn { background: white; color: #0d47a1; padding: 10px 20px;
      border-radius: 8px; border: none; margin-top: 10px; font-weight: bold; }
    .btn:hover { background: #bbdefb; }
  </style>
</head>
<body>
  <h1>ğŸ•Œ Waktu Solat & Cuaca</h1>
  <select id="negeriSelect">
    <option value="">-- Pilih Negeri --</option>
    <option value="WLY01">Kuala Lumpur</option>
    <option value="SGR01">Selangor</option>
    <option value="PNG01">Pulau Pinang</option>
    <option value="PRK01">Perak</option>
    <option value="JHR01">Johor</option>
    <option value="KTN01">Kelantan</option>
    <option value="NSN01">Negeri Sembilan</option>
    <option value="PHG01">Pahang</option>
    <option value="KDH01">Kedah</option>
    <option value="PLS01">Perlis</option>
    <option value="TRG01">Terengganu</option>
    <option value="SBH01">Sabah</option>
    <option value="SWK01">Sarawak</option>
  </select>
  <div id="solatResult">Sila pilih negeri untuk lihat waktu solat.</div>
  <div id="cuacaResult">Memuatkan cuaca...</div>

  <div class="produk-section">
    <h2>ğŸ’¼ Produk Zurich Takaful</h2>
    <button class="produk-btn" data-produk="zdrive">Z-Drive Assist</button>
    <button class="produk-btn" data-produk="zmotor">Z-Motor</button>
    <button class="produk-btn" data-produk="zrider">Z-Rider</button>
    <button class="produk-btn" data-produk="zpa">Personal Accident</button>
    <button class="produk-btn" data-produk="ztravel">Z-Travel</button>
    <button class="produk-btn" data-produk="zfirebiz">Fire Takaful (Business)</button>
  </div>

  <!-- Kuiz -->
  <section id="quizSection">
    <h2>ğŸ¯ Kuiz Zurich Takaful</h2>
    <div id="quizBox">
      <p id="quizQuestion">Uji pengetahuan anda tentang takaful!</p>
      <div id="quizOptions"></div>
      <button id="startQuiz" class="btn">Mula Kuiz</button>
    </div>
  </section>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <div id="produkInfo"></div>
      <form id="quoteForm">
        <h4>ğŸ“„ Request Quotation</h4>
        <input type="text" id="nama" placeholder="Nama penuh" required />
        <input type="tel" id="telefon" placeholder="No. Telefon" required />
        <input type="email" id="email" placeholder="Email" required />
        <textarea id="mesej" placeholder="Mesej tambahan (optional)" rows="3"></textarea>
        <button type="submit">Hantar Permohonan</button>
      </form>
    </div>
  </div>

  <footer>Â© <span id="year"></span> BroChat AzA Takaful Zurich</footer>

<script>
// ======================
// ğŸ•Œ WAKTU SOLAT (API eSolat JAKIM)
// ======================
document.getElementById("negeriSelect").addEventListener("change", async ()=>{
  const zone = document.getElementById("negeriSelect").value;
  const solatDiv = document.getElementById("solatResult");
  const cuacaDiv = document.getElementById("cuacaResult");
  if(!zone) return;

  solatDiv.textContent = "â³ Memuatkan waktu solat...";
  try {
    const res = await fetch(`https://www.e-solat.gov.my/index.php?r=esolatApi/takwimsolat&period=today&zone=${zone}`);
    const data = await res.json();
    const d = data.prayerTime[0];
    solatDiv.innerHTML = `
      ğŸŒ… Subuh: <b>${d.fajr}</b><br>
      â˜€ï¸ Zohor: <b>${d.dhuhr}</b><br>
      ğŸŒ‡ Asar: <b>${d.asr}</b><br>
      ğŸŒ† Maghrib: <b>${d.maghrib}</b><br>
      ğŸŒƒ Isyak: <b>${d.isha}</b><br>
      ğŸ“… ${d.date}
    `;
  } catch {
    solatDiv.textContent = "âŒ Gagal memuatkan waktu solat.";
  }

  // ======================
  // ğŸŒ¤ï¸ CUACA (Open-Meteo)
  // ======================
  const coords = {
    "WLY01": [3.139,101.6869],
    "SGR01": [3.0738,101.5183],
    "PNG01": [5.4164,100.3327],
    "PRK01": [4.5975,101.0901],
    "JHR01": [1.4927,103.7414],
    "KTN01": [6.1254,102.2381],
    "NSN01": [2.7258,101.9424],
    "PHG01": [3.8126,103.3256],
    "KDH01": [6.1184,100.3685],
    "PLS01": [6.4447,100.2046],
    "TRG01": [5.3302,103.1408],
    "SBH01": [5.978,116.0753],
    "SWK01": [1.5533,110.3592]
  };
  const [lat, lon] = coords[zone];
  cuacaDiv.textContent = "â›… Memuatkan cuaca...";
  try {
    const cuacaRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weathercode&timezone=auto`);
    const data = await cuacaRes.json();
    const t = data.current.temperature_2m;
    cuacaDiv.innerHTML = `ğŸŒ¡ï¸ Suhu sekarang: <b>${t}Â°C</b>`;
  } catch {
    cuacaDiv.textContent = "âŒ Gagal memuatkan cuaca.";
  }
});

// ======================
// ğŸ¯ KUIZ ZURICH TAKAFUL
// ======================
const quizData = [
  {question:"Apakah perlindungan utama Z-Motor?", options:["Kemalangan, kebakaran & kecurian","Hanya kemalangan kecil","Cermin depan sahaja","Servis tahunan percuma"], answer:0},
  {question:"Z-Rider sesuai untuk siapa?", options:["Penunggang motosikal","Pemilik lori","Pemilik rumah","Peniaga restoran"], answer:0},
  {question:"Z-Drive Assist menawarkan bantuan apa?", options:["Bantuan tepi jalan & towing","Takaful nyawa","Diskaun servis tayar","Insurans rumah"], answer:0},
  {question:"Skuter boleh dilindungi di bawah produk mana?", options:["Z-Rider","Z-Drive Assist","Z-Travel","Z-FireBiz"], answer:0}
];
let currentQuiz=0,score=0;
const quizBox=document.getElementById("quizBox");
const quizQuestion=document.getElementById("quizQuestion");
const quizOptions=document.getElementById("quizOptions");
const startBtn=document.getElementById("startQuiz");
function loadQuiz(){
  const q=quizData[currentQuiz];
  quizQuestion.textContent=q.question;
  quizOptions.innerHTML="";
  q.options.forEach((opt,i)=>{
    const btn=document.createElement("button");
    btn.textContent=opt;
    btn.className="produk-btn";
    btn.onclick=()=>checkAnswer(i);
    quizOptions.appendChild(btn);
  });
}
function checkAnswer(selected){
  if(selected===quizData[currentQuiz].answer)score++;
  currentQuiz++;
  if(currentQuiz<quizData.length){loadQuiz();}
  else{
    quizBox.innerHTML=`<h3>ğŸ‰ Kuiz Tamat!</h3><p>Skor anda: <b>${score}/${quizData.length}</b></p><button class='produk-btn' onclick='restartQuiz()'>Main Semula</button>`;
  }
}
function restartQuiz(){
  currentQuiz=0;score=0;
  quizBox.innerHTML=`<p id="quizQuestion">Uji pengetahuan anda tentang takaful!</p><div id="quizOptions"></div><button id="startQuiz" class="btn">Mula Kuiz</button>`;
  document.getElementById("startQuiz").addEventListener("click",startQuiz);
}
function startQuiz(){startBtn.style.display="none";loadQuiz();}
startBtn.addEventListener("click",startQuiz);

// ======================
// ğŸ§¾ PRODUK POPUP + WHATSAPP
// ======================
const produkInfo={
  zdrive:"ğŸš— <b>Z-Drive Assist</b> menyediakan bantuan tepi jalan, tunda kenderaan & khidmat kecemasan 24 jam.",
  zmotor:"ğŸï¸ <b>Z-Motor</b> melindungi kereta anda daripada kemalangan, kebakaran & kecurian.",
  zrider:"ğŸ›µ <b>Z-Rider</b> khas untuk penunggang motosikal & skuter â€” perlindungan menyeluruh di jalan raya.",
  zpa:"ğŸ’¼ <b>Personal Accident</b> memberi pampasan jika berlaku kemalangan, hilang upaya atau kematian.",
  ztravel:"âœˆï¸ <b>Z-Travel</b> melindungi anda sepanjang perjalanan tempatan & antarabangsa.",
  zfirebiz:"ğŸ”¥ <b>Fire Takaful (Business)</b> melindungi premis perniagaan daripada risiko kebakaran & bencana."
};
const modal=document.getElementById("modal");
const closeModal=document.getElementById("closeModal");
document.querySelectorAll(".produk-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const key=btn.dataset.produk;
    if(produkInfo[key]){
      document.getElementById("produkInfo").innerHTML=produkInfo[key];
      modal.classList.add("show");
    }
  });
});
closeModal.addEventListener("click",()=>modal.classList.remove("show"));
window.addEventListener("click",e=>{if(e.target===modal)modal.classList.remove("show");});

document.getElementById("quoteForm").addEventListener("submit",e=>{
  e.preventDefault();
  const nama=document.getElementById("nama").value;
  const tel=document.getElementById("telefon").value;
  const email=document.getElementById("email").value;
  const msg=document.getElementById("mesej").value;
  const whatsapp=`https://wa.me/60192506999?text=ğŸ“„ Permohonan Quotation Zurich Takaful:%0A%0AğŸ‘¤ Nama: ${nama}%0AğŸ“ Telefon: ${tel}%0AğŸ“§ Email: ${email}%0AğŸ’¬ Mesej: ${msg}`;
  window.open(whatsapp,"_blank");
});
document.getElementById("year").textContent=new Date().getFullYear();
</script>
</body>
</html>
