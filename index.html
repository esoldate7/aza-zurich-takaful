<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zurich Takaful Info App</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg, #0d47a1, #1976d2);
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    h1 { margin-top: 20px; }
    select, button, input, textarea {
      padding: 10px 15px;
      margin: 8px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
    }
    select { background: white; color: #0d47a1; }
    #solatResult, #cuacaBox {
      margin: 15px auto;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 10px;
      width: 90%;
    }
    .produk-section { margin-top: 30px; padding: 10px; }
    .produk-btn {
      display: block;
      background: white;
      color: #0d47a1;
      border-radius: 10px;
      margin: 10px auto;
      padding: 12px;
      width: 90%;
      font-weight: bold;
      transition: 0.2s;
    }
    .produk-btn:hover { background: #bbdefb; transform: scale(1.03); }

    /* Modal */
    .modal {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.7);
      display: flex; align-items: center; justify-content: center;
      visibility: hidden; opacity: 0;
      transition: 0.3s; z-index: 1000;
    }
    .modal.show { visibility: visible; opacity: 1; }
    .modal-content {
      background: white; color: #0d47a1;
      border-radius: 15px; padding: 20px;
      width: 90%; max-width: 420px;
      text-align: left; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .close { float: right; font-weight: bold; cursor: pointer; color: #1976d2; }
    .close:hover { color: red; }
    #quoteForm { margin-top: 15px; display: flex; flex-direction: column; }
    #quoteForm input, #quoteForm textarea {
      margin: 6px 0; border: 1px solid #ccc;
      border-radius: 6px; padding: 8px;
      font-size: 15px; width: 100%;
    }
    #quoteForm button {
      background: #1976d2; color: white; font-weight: bold;
    }
    #quoteForm button:hover { background: #0d47a1; }
    footer { margin-top: 30px; font-size: 14px; opacity: 0.7; }
  </style>
</head>
<body>
  <h1>ğŸ•Œ Waktu Solat & Cuaca</h1>
  <select id="negeriSelect"><option value="">-- Pilih Negeri --</option></select>
  <div id="solatResult">Sila pilih negeri untuk lihat waktu solat.</div>
  <div id="cuacaBox">Memuatkan cuaca...</div>

  <div class="produk-section">
    <h2>ğŸ’¼ Produk Zurich Takaful</h2>
    <button class="produk-btn" data-produk="zdrive">Z-Drive Assist</button>
    <button class="produk-btn" data-produk="zmotor">Z-Motor</button>
    <button class="produk-btn" data-produk="zrider">Z-Rider</button>
    <button class="produk-btn" data-produk="zpa">Personal Accident</button>
    <button class="produk-btn" data-produk="ztravel">Z-Travel</button>
    <button class="produk-btn" data-produk="zfirebiz">Fire Takaful (Business)</button>
  </div> 

  <section id="quizSection" class="card">
    <div class="card-header"><h2>ğŸ¯ Kuiz Zurich Takaful</h2></div>
    <div id="quizBox" class="quiz-box">
      <p id="quizQuestion" class="quiz-question">Uji pengetahuan anda tentang takaful!</p>
      <div id="quizOptions" class="quiz-options"></div>
      <button id="startQuiz" class="btn">Mula Kuiz</button>
    </div>
  </section>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <div id="produkInfo"></div>

      <form id="quoteForm">
        <h4>ğŸ“„ Request Quotation</h4>
        <input type="text" id="nama" placeholder="Nama penuh" required />
        <input type="tel" id="telefon" placeholder="No. Telefon" required />
        <input type="email" id="email" placeholder="Email" required />
        <textarea id="mesej" placeholder="Mesej tambahan (optional)" rows="3"></textarea>
        <button type="submit">Hantar Permohonan</button>
      </form>
    </div>
  </div>

  <footer>Â© <span id="year"></span> BroChat AzA Takaful Zurich</footer>

<script>
// ======================
// ğŸ“… SENARAI NEGERI
// ======================
const negeriList = {
  "WLY01": { name: "Kuala Lumpur", lat: 3.139, lon: 101.6869 },
  "SGR01": { name: "Selangor", lat: 3.0738, lon: 101.5183 },
  "JHR01": { name: "Johor", lat: 1.4927, lon: 103.7414 },
  "KDH01": { name: "Kedah", lat: 6.1184, lon: 100.3685 },
  "KTN01": { name: "Kelantan", lat: 6.1254, lon: 102.2381 },
  "MLK01": { name: "Melaka", lat: 2.1896, lon: 102.2501 },
  "NSN01": { name: "Negeri Sembilan", lat: 2.7258, lon: 101.9424 },
  "PHG01": { name: "Pahang", lat: 3.8126, lon: 103.3256 },
  "PRK01": { name: "Perak", lat: 4.5921, lon: 101.0901 },
  "PLS01": { name: "Perlis", lat: 6.4433, lon: 100.2048 },
  "PNG01": { name: "Pulau Pinang", lat: 5.4164, lon: 100.3327 },
  "SBH01": { name: "Sabah", lat: 5.9788, lon: 116.0753 },
  "SWK01": { name: "Sarawak", lat: 1.5533, lon: 110.3592 },
  "TRG01": { name: "Terengganu", lat: 5.3292, lon: 103.137 },
  "LBN01": { name: "Labuan", lat: 5.2831, lon: 115.2308 }
};

const negeriSelect = document.getElementById("negeriSelect");
Object.entries(negeriList).forEach(([code, info])=>{
  const opt = document.createElement("option");
  opt.value = code; opt.textContent = info.name;
  negeriSelect.appendChild(opt);
});

// ======================
// ğŸ•Œ WAKTU SOLAT + â˜ï¸ CUACA
// ======================
negeriSelect.addEventListener("change", async ()=>{
  const zone = negeriSelect.value;
  const result = document.getElementById("solatResult");
  const cuacaBox = document.getElementById("cuacaBox");
  if(!zone) return;
  const { lat, lon, name } = negeriList[zone];
  result.textContent = "â³ Memuatkan waktu solat...";
  cuacaBox.textContent = "â³ Memuatkan cuaca semasa...";

  try {
    const res = await fetch(`https://www.e-solat.gov.my/index.php?r=esolatApi/takwimsolat&period=today&zone=${zone}`);
    const data = await res.json();
    const d = data.prayerTime[0];
    result.innerHTML = `
      <b>ğŸ“ ${name}</b><br>
      ğŸŒ… Subuh: <b>${d.fajr}</b><br>
      â˜€ï¸ Zohor: <b>${d.dhuhr}</b><br>
      ğŸŒ‡ Asar: <b>${d.asr}</b><br>
      ğŸŒ† Maghrib: <b>${d.maghrib}</b><br>
      ğŸŒƒ Isyak: <b>${d.isha}</b><br>
      ğŸ“… ${d.date}
    `;
  } catch {
    result.textContent = "âŒ Gagal memuatkan waktu solat.";
  }
});

// ======================
// ğŸ’¼ PRODUK INFO POPUP
// ======================
const produkInfoData = {
  zdrive: "ğŸš— <b>Z-Drive Assist</b><br>Bantuan tepi jalan 24 jam, towing, dan sokongan kecemasan untuk pemandu.",
  zmotor: "ğŸï¸ <b>Z-Motor</b><br>Perlindungan menyeluruh untuk kenderaan bermotor terhadap kemalangan, kecurian dan kebakaran.",
  zrider: "ğŸ›µ <b>Z-Rider</b><br>Perlindungan khas untuk penunggang motosikal dan skuter.",
  zpa: "ğŸ’¼ <b>Personal Accident</b><br>Perlindungan kemalangan diri untuk individu dan keluarga.",
  ztravel: "âœˆï¸ <b>Z-Travel</b><br>Perlindungan perjalanan domestik dan antarabangsa.",
  zfirebiz: "ğŸ¢ <b>Fire Takaful (Business)</b><br>Perlindungan aset perniagaan daripada kebakaran dan risiko lain."
};

const modal = document.getElementById("modal");
const closeModal = document.getElementById("closeModal");
const produkInfo = document.getElementById("produkInfo");

document.querySelectorAll(".produk-btn").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    const key = btn.dataset.produk;
    produkInfo.innerHTML = produkInfoData[key] || "Maklumat tidak dijumpai.";
    modal.classList.add("show");
  });
});
closeModal.onclick = ()=> modal.classList.remove("show");
window.onclick = e=>{ if(e.target===modal) modal.classList.remove("show"); };

// ======================
// ğŸ“± AUTO WHATSAPP FORM
// ======================
document.getElementById("quoteForm").addEventListener("submit", (e)=>{
  e.preventDefault();
  const nama = document.getElementById("nama").value.trim();
  const telefon = document.getElementById("telefon").value.trim();
  const email = document.getElementById("email").value.trim();
  const mesej = document.getElementById("mesej").value.trim();
  const produk = produkInfo.textContent.match(/Z-[A-Za-z]+/)?.[0] || "Zurich Takaful";
  
  const text = `Assalamualaikum, saya nak minta quotation produk ${produk}.%0A`+
               `Nama: ${nama}%0A`+
               `Telefon: ${telefon}%0A`+
               `Email: ${email}%0A`+
               `Mesej: ${mesej}`;
  
  window.open(`https://wa.me/60192506999?text=${text}`, "_blank");
});
</script>
</body>
</html>
